## Задание №6: Обновление и удаление данных через репозиторий

Необходимо создать 2 метода внутри BaseRepository по заданным сигнатурам (см. [скриншот](Screenshot_at_Aug_28_23-35-20.png)), а также переписать ручки PUT и DELETE.

***Скриншот:***<br>
<img src="Screenshot_at_Aug_28_23-35-20.png" alt="скриншот" height="135">

Не нужно переписывать PATCH ручку!

- Метод edit изменяет объект(ы) в базе данных. Для обновления объекта нужно принимать его id через параметры пути: PUT /hotels/{hotel_id}

- Метод delete удаляет объект(ы) в базе данных. Для удаления объекта нужно принимать его id через параметры пути: DELETE /hotels/{hotel_id}


*Задание со звездочкой (не рассматривается в решении): перед обновлением или удалением необходимо убедиться, что мы изменяем или удаляем именно один объект. То есть нам не подходят варианты, когда такого объекта нет или объектов с такими фильтрами больше одного. В таких случаях нужно выбрасывать ошибку:

- со статусом 404 в случае, если объект не найден;
- 400 или 422, если объектов больше одного.

*Код со [скриншота](Screenshot_at_Aug_28_23-35-20.png):*
```
async def edit(self, data: BaseModel, **filter_by) -> None:
    ...

async def delete(self, **filter_by) -> None:
    ...
```


## Что сделано

К реализации в задании №5 "Задание №5: Вставка данных через репозиторий" добавлено:


- Сделаны репозитарии в папке src/repositories:
  - src/repositories/base.py: файл с классом базового репозитария (родительским).
  - src/repositories/hotels.py: файл с классом репозитария для отелей, дочернего базовому.
  - src/repositories/rooms.py: файл с заготовкой для класса репозитария для номеров, дочернего базовому.

Базовый репозитарий содержит класс BaseRepositoryMyCode, который включает:
- model: атрибут класса.
- session: атрибут экземпляра класса.
- \_\_init\_\_: метод класса. Инициализирует объект класса при создании.
- get_rows: метод класса. Выбирает заданное количество строк с заданным смещением.
- add_item_insert: метод класса. Добавляет один объект в базу, используя метод insert. Возвращает номер добавленного объекта.
- add_item: метод класса. Добавляет один объект в базу, используя метод session.add. Возвращает добавленный объект.

Репозитарий для отелей содержит класс HotelsRepositoryMyCode, дочерний к родительскому классу BaseRepositoryMyCode. Класс HotelsRepositoryMyCode включает:
- \_\_init\_\_: метод класса. Инициализирует объект класса при создании.
- get_all: метод класса. Выбирает все строки. Использует родительский метод get_rows.
- get_limit: метод класса. Выбирает заданное количество строк с заданным смещением. Использует родительский метод get_rows.
- get_one_or_none: метод класса. Возвращает одну строку или None. Если получено более одной строки, то поднимается исключение MultipleResultsFound. Использует родительский метод get_rows.
- add_item_insert: метод класса. Добавляет один объект в базу, используя метод insert. Возвращает номер добавленного объекта. Служит обёрткой для родительского метода add_item_insert. Возвращает номер добавленного объекта.
- add_item: метод класса. Добавляет один объект в базу, используя метод session.add. Возвращает добавленный объект. Служит обёрткой для родительского метода add_item.


Репозитарий для комнат RoomsRepository находится в стадии разработки, файл пустой.


## Итог

- Структура проекта(см. файл "[project_structure.md](project_structure.md)").

- Краткая справка по командам alembic - см. файл "[src/models/ReadMe.md](src/models/ReadMe.md)".

- Созданные таблицы в базе данных см. картинку "[tables_in_database.png](tables_in_database.png)".