## Структура проекта

```
Project
├── .env            Содержит описание переменных окружения. 
│                   Этот файл никому не показывать, на
│                   гитхаб не выкладывать.
├── .env-example    Текстовый файл, который содержит переменные 
│                   окружения с примером заполнения.
├── .gitignore      Какие файлы запрещено загружать на гитхаб
├── alembic.ini     Файл с настройками alembic
│                   В нём указан путь до папки с миграциями:
│                   script_location = src\migration
│                   Надо добавить папки в параметре
│                   prepend_sys_path = . src
│                   Если папку с миграциями переместить в другое место,
│                   то надо будет поменять эти параметры.
│                   Для работы с пакетом black:
│                   - Раскомментируем строки 73-76
│                   hooks = black
│                   black.type = console_scripts
│                   black.entrypoint = black
│                   black.options = -l 79 REVISION_SCRIPT_FILENAME
│                   В последней строке меняем 79 на 88 – это количество символов в строке.
│                   - Раскомментируем строку 12:
│                   file_template = %%(year)d_%%(month).2d_%%(day).2d_%%(hour).2d%%(minute).2d-%%(rev)s_%%(slug)s
├── project_structure.md    Этот файл.
├── requirements.txt        Пакеты для установки.
├── variables_abbreviations_and_naming.md    Сокращения, используемые при
│                                            именовании переменных и функций.
├── src
│   ├── config.py       Импорт переменных окружения из файла .env и 
│   │                   подготавливает их для использования в программе.
│   ├── database.py     Основной файл для работы с подключением к базе данных.
│   ├── main.py         Файл запуска приложения
│   ├── api: файлы приложения
│   │   ├── dependencies
│   │   │   ├── dependencies.py     Часто используемые классы (в моём 
│   │   │   │                       случае - описание пагинации).
│   │   ├── routers
│   │   │   ├── auth.py             Обработка конечных точек FastAPI для пользователей
│   │   │   ├── hotels.py           Обработка конечных точек FastAPI для отелей
│   │   │   ├── rooms.py            Обработка конечных точек FastAPI для номеров
│   ├── migration: файлы для миграций
│   │   ├── env.py          Настройки alembic
│   │   │                   - Добавляем код с новыми моделями (пример для модели RoomsORM)
│   │   │                     (from src.models.rooms import RoomsORM)
│   │   │                   - Изменяем код для обработки метаданных
│   │   │                     (from src.database import Base
│   │   │                     target_metadata = Base.metadata)
│   │   │                   - Устанавливаем параметр для правильной обработки миграций:
│   │   │                     config.set_main_option("sqlalchemy.url", f"{settings.DB_URL}?async_fallback=True")
│   │   ├── README
│   │   ├── script.py.mako
│   │   ├── versions    файлы со сгенерированным кодом для миграций
│   │   │   ├── 2024_12_16_2358-5142f000848b_001_create_table_hotels.py
│   │   │   ├── 2024_12_17_0004-5711a9787c99_002_create_rooms_hotels.py
│   │   │   ├── 2025_01_09_1440-ed77240b4dbc_003_add_users.py
│   │   │   ├── 2025_01_09_1848-1505718cb7dc_004_make_email_unique.py
│   ├── models: файлы с моделями для работы с базой данных
│   │   ├── hotels.py       модель для работы с отелями (создаваемые таблицы)
│   │   ├── rooms.py        модель для работы с номерами (создаваемые таблицы)
│   │   ├── users.py        модель для работы с пользователями (создаваемые таблицы)
│   ├── repositories
│   │   ├── base.py         файл с классом базового репозитария (родительским).
│   │   ├── hotels.py       файл с классом репозитария для отелей, дочернего базовому.
│   │   ├── rooms.py        файл с классом репозитария для номеров, дочернего базовому.
│   │   ├── users.py        файл с классом репозитария для пользователей, дочернего базовому.
│   ├── services: файлы с сервисным кодом
│   │   ├── auth.py         файл для работы с токенами, авторизацией, хешированием паролей и т.д., 
│   │   │                   которые используются в src/api/routers/auth.py
│   ├── schemas: файлы со схемами данных
│   │   ├── hotels.py       файл со схемами данных для отелей, схемы используются в src/api/routers/hotels.py
│   │   ├── rooms.py        файл со схемами данных для номеров, схемы используются в src/api/routers/rooms.py
│   │   ├── users.py        файл со схемами данных для пользователей, схемы используются в src/api/routers/users.py
```

### Как создавалась структура проекта.

1. Код проекта находится в папке src.

2. Сначала написан код для обработки конечных точек FastAPI:
src/main.py - файл запуска приложения.
файлы с кодом:
    - src/api/routers/hotels.py: обработка конечных точек FastAPI.
    - src/api/dependencies/dependencies.py: часто используемые классы (в моём случае - описание пагинации).
    - src/schemas/hotels.py: файлы со схемами данных. Используются в src/api/routers/hotels.py.
    - src/models/hotels.py: модель для работы с отелями (создаваемые таблицы).
    - src/models/rooms.py: модель для работы с номерами (создаваемые таблицы).

3. Сделана обработка переменных окружения:
    - .env: содержит описание переменных окружения. Этот файл никому не показывать, на гитхаб не выкладывать.
    - src/config.py: делает импорт переменных окружения из файла .env и подготавливает их для использования в программе.

4. Работа с базой данных:
    - src/database.py - основной файл для работы с подключением к базе данных.

5. Установлен alembic, добавились файлы:
    - alembic.ini
    - src/migration/env.py
    - src/migration/README
    - src/migration/script.py.mako
    - src/migration/versions

6. Сделаны миграции, добавлены файлы миграций:
    - src/migration/versions/2024_12_16_2358-5142f000848b_001_create_table_hotels.py
    - src/migration/versions/2024_12_17_0004-5711a9787c99_002_create_rooms_hotels.py

7. Сделаны репозитарии в папке src/repositories:
    - src/repositories/base.py: файл с классом базового репозитария (родительским).
    - src/repositories/hotels.py: файл с классом репозитария для отелей, дочернего базовому.
    - src/repositories/rooms.py: файл с заготовкой для класса репозитария для номеров, дочернего базовому.
